---
- name: 'Include OS-specific variables'
  ansible.builtin.include_vars: '{{ distribution }}'
  with_first_found:
    - '{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml'
    - '{{ ansible_distribution }}.yml'
    - '{{ ansible_os_family }}.yml'
  loop_control:
    loop_var: distribution

- name: 'Include OS-specific tasks for Installing OpenSSH'
  ansible.builtin.include_tasks: '{{ distribution }}'
  with_first_found:
    - '{{ ansible_system }}/install-{{ ansible_os_family }}.yml'
    - '{{ ansible_system }}/install.yml'
  loop_control:
    loop_var: distribution

- name: 'Include OS-specific tasks for Configure OpenSSH'
  ansible.builtin.include_tasks: '{{ ansible_system }}/configure.yml'

- name: 'Include OS-specific security settings tasks'
  ansible.builtin.include_tasks: '{{ ansible_system }}/security.yml'
